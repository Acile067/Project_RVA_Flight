<UserControl x:Class="RVA_Flight.Client.Views.FlightView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:RVA_Flight.Client.Views"
             xmlns:localEnums="clr-namespace:RVA_Flight.Client.Helpers"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="900">
    <Grid Margin="10">
        <StackPanel>
            <Label Content="Flights" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   Margin="0,-5,0,10" />
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center" HorizontalAlignment="Left">
                <Label Content="Search by:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox Width="150" Margin="0,0,10,0"
                          ItemsSource="{Binding FlightSearchProperties}" 
                          SelectedItem="{Binding SelectedSearchProperty}" />
                <TextBox Width="200" Margin="0,0,10,0"
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                         ToolTip="Enter search value"/>
                <Button Content="Search" Width="80" Margin="0,0,5,0"
                        Command="{Binding SearchCommand}" />
                <Button Content="Show Flights" Width="80"
                        Command="{Binding ShowAllCommand}" />
                <Button Content="Charter Flights" Width="80" Margin="0,0,5,0"
                    Command="{Binding ShowChartersCommand}" />

                
            </StackPanel>
            <DataGrid ItemsSource="{Binding FilteredFlights}" AutoGenerateColumns="False" Height="200"
                      Margin="0,0,0,10" IsReadOnly="True">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Flight Number" Binding="{Binding FlightNumber}" Width="*"/>
                    <DataGridTextColumn Header="Departure" Binding="{Binding Departure.Name}" Width="*"/>
                    <DataGridTextColumn Header="Arrival" Binding="{Binding Arrival.Name}" Width="*"/>
                    <DataGridTextColumn Header="Airplane" Binding="{Binding Airplane.Name}" Width="*"/>
                    <DataGridTextColumn Header="Departure Time" Binding="{Binding DepartureTime}" Width="*"/>
                    <DataGridTextColumn Header="Arrival Time" Binding="{Binding ArrivalTime}" Width="*"/>
                    <DataGridTextColumn Header="State" Binding="{Binding State.Name}" Width="*"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
            <TextBlock Text="Add" FontSize="16" FontWeight="Bold"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                <StackPanel Orientation="Vertical" Margin="5">

                    <TextBlock Text="Flight Number:" FontSize="12"/>
                    <TextBox Width="150" Height="25"
                Text="{Binding NewFlight.FlightNumber, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Departure:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                    ItemsSource="{Binding Cities}"
                    DisplayMemberPath="Name"
                    SelectedItem="{Binding NewFlight.Departure}" />

                    <TextBlock Text="Arrival:" FontSize="12"/>
                    <ComboBox Width="150" Height="25" 
                    ItemsSource="{Binding Cities}"
                    DisplayMemberPath="Name"
                    SelectedItem="{Binding NewFlight.Arrival}" />
                </StackPanel>



                <StackPanel Orientation="Vertical" Margin="5">
                    <TextBlock Text="Departure Time:" FontSize="12"/>
                    <DatePicker SelectedDate="{Binding NewFlight.DepartureTime}" Width="150" Height="25"/>

                    <TextBlock Text="Arrival Time:" FontSize="12"/>
                    <DatePicker SelectedDate="{Binding NewFlight.ArrivalTime}" Width="150" Height="25"/>

                    <TextBlock Text="Airplane:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                        ItemsSource="{Binding Airplanes}"
                        DisplayMemberPath="Name"
                        SelectedItem="{Binding NewFlight.Airplane}" />
                </StackPanel>


                <StackPanel Orientation="Vertical" Margin="5">
                    <TextBlock Text="Type:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                    SelectedItem="{Binding NewFlight.Type}"
                    ItemsSource="{x:Static localEnums:FlightTypeValues.All}" />

                    <TextBlock Text="Pilot Message:" FontSize="12"/>
                    <TextBox Width="150" Height="68" TextWrapping="Wrap" AcceptsReturn="True"
                        Text="{Binding NewFlight.PilotMessage, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>
                <StackPanel Orientation="Vertical" Margin="5">

                    <TextBlock Text="Delay (min):" FontSize="12"/>
                    <TextBox Width="100" Height="25"
                        Text="{Binding NewFlight.DelayMinutes, UpdateSourceTrigger=PropertyChanged}"/>

                
                <Button Content="Add Flight" Width="100" Height="25" Command="{Binding AddFlightCommand}" Margin="5"/>
                </StackPanel>

                


            </StackPanel>
            <TextBlock Text="{Binding AddErrorMessage}" Foreground="Red" FontWeight="Bold"/>

            <TextBlock Text="Update" FontSize="16" FontWeight="Bold"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                <StackPanel Orientation="Vertical" Margin="5">

                    <TextBlock Text="Flight Number:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                        ItemsSource="{Binding Flights}"
                        DisplayMemberPath="FlightNumber"
                        SelectedItem="{Binding SelectedFlight, Mode=TwoWay}" />

                    <TextBlock Text="Departure:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                        ItemsSource="{Binding Cities}"
                        DisplayMemberPath="Name"
                        SelectedValuePath="Id"
                        SelectedItem="{Binding UpdatedFlight.Departure, Mode=TwoWay}" />

                    <TextBlock Text="Arrival:" FontSize="12"/>
                    <ComboBox Width="150" Height="25" 
                        ItemsSource="{Binding Cities}"
                        DisplayMemberPath="Name"
                        SelectedItem="{Binding UpdatedFlight.Arrival}" />
                </StackPanel>



                <StackPanel Orientation="Vertical" Margin="5">
                    <TextBlock Text="Departure Time:" FontSize="12"/>
                    <DatePicker SelectedDate="{Binding UpdatedFlight.DepartureTime}" Width="150" Height="25"/>

                    <TextBlock Text="Arrival Time:" FontSize="12"/>
                    <DatePicker SelectedDate="{Binding UpdatedFlight.ArrivalTime}" Width="150" Height="25"/>

                    <TextBlock Text="Airplane:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                        ItemsSource="{Binding Airplanes}"
                        DisplayMemberPath="Name"
                        SelectedItem="{Binding UpdatedFlight.Airplane}" />
                </StackPanel>


                <StackPanel Orientation="Vertical" Margin="5">
                    <TextBlock Text="Type:" FontSize="12"/>
                    <ComboBox Width="150" Height="25"
                    SelectedItem="{Binding UpdatedFlight.Type}"
                    ItemsSource="{x:Static localEnums:FlightTypeValues.All}" />

                    <TextBlock Text="Pilot Message:" FontSize="12"/>
                    <TextBox Width="150" Height="68" TextWrapping="Wrap" AcceptsReturn="True"
            Text="{Binding UpdatedFlight.PilotMessage, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>
                <StackPanel Orientation="Vertical" Margin="5">

                    <TextBlock Text="Delay (min):" FontSize="12"/>
                    <TextBox Width="100" Height="25"
            Text="{Binding UpdatedFlight.DelayMinutes, UpdateSourceTrigger=PropertyChanged}"/>


                    <Button Content="Update Flight" Width="100" Height="25" Command="{Binding UpdateFlightCommand}" Margin="5"/>
                </StackPanel>




            </StackPanel>
            <TextBlock Text="{Binding UpdateErrorMessage}" Foreground="Red" FontWeight="Bold"/>

            <StackPanel Orientation="Horizontal">
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="Delete" FontSize="16" FontWeight="Bold"/>
                    <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Flight Number:" FontSize="12" Margin="5"/>

                            <ComboBox Width="150" Height="25"
                                ItemsSource="{Binding Flights}"
                                DisplayMemberPath="FlightNumber"
                                SelectedItem="{Binding SelectedFlightForDelete, Mode=TwoWay}" Margin="5"/>
                            <Button Content="Delete Flight" Width="100" Height="25" Command="{Binding DeleteFlightCommand}" Margin="5"/>

                        </StackPanel>
                    <TextBlock Text="{Binding DeleteErrorMessage}" Foreground="Red" FontWeight="Bold"/>
                </StackPanel>
            
                <StackPanel Orientation="Vertical" Margin="70,0,0,0">
                    <TextBlock Text="Undo/Redo Operation" FontSize="16" FontWeight="Bold"/>
            <StackPanel Orientation="Horizontal">
                <Button Content="Undo" Width="50" Height="25" Command="{Binding UndoOperationCommand}" Margin="5"/>
                <Button Content="Redo" Width="50" Height="25" Command="{Binding RedoOperationCommand}" Margin="5"/>
            </StackPanel>
            </StackPanel>
            </StackPanel>
           



        </StackPanel>
    </Grid>
</UserControl>
